# Quick Fix: PRINT_START with Manual Purge Line
# Use this if LINE_PURGE isn't working and you need to print NOW

# Replace your PRINT_START macro with this:

[gcode_macro PRINT_START]
description: Start print routine with heating and adaptive meshing
gcode:
    {% set EXTRUDER = params.EXTRUDER_TEMP|default(200)|int %}
    {% set BED = params.BED_TEMP|default(60)|int %}
    
    RESPOND MSG="Starting print - Bed: {BED}C, Extruder: {EXTRUDER}C"
    
    # Pre-heat extruder to prevent oozing during mesh
    M104 S150
    
    # Heat bed and wait
    M140 S{BED}
    M190 S{BED}
    
    # Home if not already homed
    _CHOME
    
    # Adaptive bed mesh (KAMP)
    BED_MESH_CALIBRATE
    
    # Move to purge position
    G90
    G1 X2 Y10 Z5 F5000
    
    # Final extruder heating
    M104 S{EXTRUDER}
    M109 S{EXTRUDER}
    
    # Manual two-line purge (replaces LINE_PURGE)
    G1 Z0.3 F3000           # Lower to purge height
    G92 E0                  # Reset extruder
    G1 X2 Y140 E10 F1500    # Draw first purge line
    G1 X2.4 Y140 F5000      # Move over 0.4mm
    G1 X2.4 Y10 E20 F1200   # Draw second purge line
    G92 E0                  # Reset extruder
    G1 Z2.0 F3000           # Lift nozzle
    
    RESPOND MSG="Print starting!"

# This creates a reliable two-line purge on the left edge of the bed
# It's the same purge line that worked on stock Marlin Ender 3s
